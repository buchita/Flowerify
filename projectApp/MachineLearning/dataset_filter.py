import skimage
from colorthief import ColorThief
import numpy
import cv2

# grabcut values
daisy = [(220, 35, 65), (226, 46, 39), (217, 71, 57), (211, 49, 13), (220, 151, 159), (208, 25, 27), (248, 107, 16), (232, 182, 20), (215, 48, 140), (215, 97, 100), (207, 60, 122), (204, 115, 13), (222, 188, 144), (236, 52, 10), (160, 113, 9), (172, 120, 22), (184, 132, 194), (219, 19, 84), (241, 129, 22), (184, 51, 73), (245, 198, 25), (193, 57, 88), (212, 50, 57), (206, 23, 24), (244, 192, 138), (239, 37, 42), (236, 140, 149), (191, 43, 34), (209, 94, 150), (163, 165, 156), (210, 67, 96), (243, 83, 25), (176, 91, 106), (205, 161, 154), (164, 154, 43), (234, 70, 73), (242, 59, 82), (217, 172, 138), (218, 54, 50), (200, 178, 172), (166, 156, 129), (162, 139, 110), (163, 162, 115), (231, 200, 191), (186, 156, 164), (239, 130, 153), (212, 171, 33), (176, 161, 88), (203, 37, 56), (209, 96, 109), (228, 95, 109), (201, 109, 88), (184, 26, 16), (186, 48, 68), (244, 204, 61), (179, 92, 105), (223, 121, 156), (214, 180, 148), (238, 186, 34), (125, 92, 7), (246, 109, 164), (219, 76, 113), (234, 205, 92), (213, 195, 56), (142, 16, 23), (186, 68, 14), (197, 23, 52), (235, 88, 20), (204, 48, 57), (165, 161, 98), (238, 40, 59), (198, 167, 21), (240, 96, 223), (225, 62, 148), (229, 84, 31), (228, 106, 124), (245, 77, 88), (220, 159, 24), (197, 158, 55), (227, 75, 95), (207, 82, 123), (212, 80, 123), (211, 188, 154), (216, 56, 51), (231, 88, 151), (197, 164, 27), (197, 184, 77), (185, 110, 102), (184, 123, 123), (209, 114, 150), (175, 105, 108), (223, 52, 85), (224, 123, 181), (202, 59, 129), (229, 126, 125), (237, 149, 161), (211, 123, 24), (204, 63, 28), (233, 164, 17), (181, 21, 20)]
blanketflower = [(225, 62, 65), (234, 158, 33), (214, 84, 40), (206, 75, 58), (219, 103, 62), (231, 144, 47), (242, 154, 84), (171, 18, 48), (205, 74, 41), (208, 67, 16), (222, 93, 80), (226, 133, 53), (229, 173, 40), (208, 41, 31), (231, 61, 37), (227, 190, 18), (205, 53, 39), (225, 77, 41), (241, 194, 26), (188, 49, 35), (154, 37, 20), (204, 60, 53), (245, 184, 91), (208, 80, 61), (206, 70, 58), (227, 70, 68), (228, 166, 16), (221, 101, 83), (194, 45, 8), (247, 219, 57), (220, 59, 74), (229, 144, 47), (236, 165, 39), (230, 138, 96), (192, 60, 47), (218, 179, 82), (229, 140, 37), (223, 86, 79), (190, 85, 49), (204, 70, 47), (215, 62, 84), (216, 165, 47), (207, 47, 43), (228, 152, 42), (213, 117, 132), (212, 65, 90), (208, 88, 52), (205, 155, 60), (231, 64, 52), (205, 105, 10), (212, 79, 59), (227, 186, 50), (207, 92, 22), (219, 89, 46), (243, 174, 119), (218, 92, 47), (185, 56, 46), (219, 54, 73), (212, 63, 40), (202, 95, 72), (219, 106, 92), (189, 61, 39), (243, 163, 96), (195, 92, 45), (220, 89, 111), (190, 73, 64), (214, 63, 28), (191, 52, 51), (220, 83, 66), (226, 142, 102), (216, 95, 64), (191, 53, 55), (237, 65, 88), (216, 73, 27), (234, 89, 79), (236, 94, 89), (238, 162, 92), (204, 41, 40), (181, 69, 38), (223, 72, 36), (240, 102, 96), (218, 86, 66), (181, 83, 76), (176, 123, 41), (200, 86, 53), (218, 104, 41), (238, 92, 95), (219, 86, 53), (239, 116, 86), (247, 194, 57), (193, 86, 57), (224, 72, 80), (193, 96, 64), (206, 43, 45), (243, 155, 116), (216, 49, 52), (222, 89, 77), (235, 143, 18), (205, 54, 58), (216, 86, 43)]
buttercup = [(194, 154, 9), (226, 193, 9), (188, 173, 9), (202, 165, 7), (123, 103, 11), (171, 163, 19), (228, 187, 36), (185, 158, 7), (204, 163, 24), (135, 121, 6), (184, 173, 35), (215, 183, 13), (227, 183, 14), (212, 208, 53), (230, 179, 37), (224, 173, 12), (220, 168, 8), (226, 189, 15), (247, 200, 40), (198, 185, 16), (202, 181, 17), (211, 180, 27), (237, 197, 17), (201, 179, 14), (190, 177, 9), (198, 172, 15), (179, 123, 6), (180, 158, 12), (234, 191, 9), (243, 211, 14), (181, 161, 23), (222, 183, 5), (224, 187, 6), (244, 219, 11), (238, 206, 7), (249, 230, 21), (233, 190, 8), (224, 179, 8), (247, 229, 20), (238, 200, 9), (232, 189, 10), (241, 208, 13), (238, 200, 9), (222, 192, 23), (245, 221, 13), (243, 202, 8), (244, 214, 9), (249, 233, 12), (249, 228, 12), (237, 210, 17), (239, 218, 36), (250, 244, 31), (248, 229, 17), (204, 165, 13), (192, 169, 55), (213, 184, 16), (185, 168, 6), (200, 181, 9), (169, 145, 26), (224, 217, 9), (186, 158, 21), (229, 192, 42), (221, 211, 32), (199, 202, 18), (174, 178, 19), (187, 191, 13), (181, 189, 15), (177, 174, 25), (238, 188, 33), (205, 202, 29), (243, 225, 8), (229, 221, 16), (210, 183, 31), (214, 214, 50), (213, 195, 14), (209, 184, 64), (187, 154, 9), (239, 193, 28), (212, 180, 86), (223, 161, 9), (146, 176, 9), (222, 230, 11), (198, 144, 8), (216, 192, 33), (199, 169, 14), (160, 125, 8), (216, 223, 38), (198, 202, 47), (193, 170, 56), (173, 177, 20), (198, 166, 21), (214, 174, 10), (234, 189, 28), (223, 208, 27), (206, 192, 18), (207, 204, 34), (231, 233, 35), (240, 203, 43), (213, 214, 27), (245, 203, 12)]
carnation = [(175, 23, 44), (191, 87, 97), (249, 217, 215), (229, 181, 173), (203, 56, 35), (170, 57, 132), (192, 149, 167), (196, 169, 171), (192, 149, 166), (207, 92, 145), (191, 19, 51), (193, 79, 71), (192, 14, 35), (233, 142, 143), (241, 173, 171), (132, 24, 100), (224, 136, 177), (177, 43, 77), (197, 87, 90), (233, 162, 170), (166, 19, 26), (197, 90, 92), (210, 149, 142), (193, 12, 15), (221, 73, 45), (226, 132, 148), (242, 142, 186), (199, 38, 51), (99, 186, 230), (224, 143, 149), (172, 34, 46), (183, 39, 47), (247, 152, 184), (238, 127, 97), (241, 165, 192), (130, 69, 145), (216, 212, 189), (217, 120, 136), (231, 76, 52), (212, 132, 136), (226, 182, 66), (202, 177, 183), (183, 119, 130), (173, 45, 77), (214, 167, 170), (107, 46, 48), (221, 222, 214), (176, 167, 112), (238, 153, 108), (176, 167, 112), (222, 143, 80), (239, 123, 92), (220, 207, 95), (222, 151, 153), (202, 165, 172), (176, 56, 68), (182, 25, 51), (229, 187, 206), (203, 81, 97), (163, 141, 151), (213, 9, 19), (205, 178, 172), (143, 100, 142), (238, 66, 25), (232, 85, 101), (184, 118, 136), (198, 149, 99), (226, 55, 53), (215, 212, 206), (198, 129, 144), (176, 103, 131), (199, 107, 147), (164, 18, 23), (212, 18, 53), (184, 144, 138), (229, 180, 209), (147, 164, 139), (210, 10, 50), (161, 125, 137), (189, 190, 168), (202, 68, 81), (189, 14, 31), (213, 211, 205), (239, 104, 108), (240, 150, 138), (217, 170, 192), (211, 146, 184), (195, 142, 123), (207, 156, 114), (214, 160, 132), (175, 158, 78), (169, 120, 128), (231, 203, 217), (226, 167, 167), (180, 178, 172), (221, 92, 101), (229, 134, 117), (230, 157, 169), (187, 120, 134), (169, 120, 128)]
dandelion = [(217, 208, 56), (225, 190, 15), (228, 195, 62), (220, 185, 8), (206, 179, 11), (197, 154, 4), (204, 151, 7), (237, 210, 11), (215, 206, 55), (243, 221, 36), (227, 179, 45), (211, 182, 14), (211, 186, 23), (204, 151, 7), (206, 176, 10), (202, 190, 20), (190, 152, 22), (229, 213, 35), (234, 191, 20), (186, 151, 32), (201, 177, 31), (229, 215, 13), (213, 185, 14), (183, 176, 14), (198, 186, 26), (232, 202, 27), (215, 188, 24), (173, 138, 9), (187, 164, 58), (217, 197, 45), (208, 160, 28), (201, 133, 26), (198, 160, 25), (208, 187, 13), (220, 204, 33), (219, 184, 69), (223, 212, 23), (223, 202, 27), (207, 186, 9), (220, 195, 27), (195, 149, 20), (208, 192, 56), (219, 198, 23), (174, 142, 14), (208, 161, 23), (212, 183, 36), (190, 164, 30), (215, 172, 17), (208, 181, 22), (224, 170, 40), (228, 220, 53), (206, 210, 26), (173, 140, 12), (187, 142, 21), (178, 155, 28), (230, 221, 25), (207, 143, 16), (227, 205, 12), (219, 193, 17), (197, 179, 21), (217, 187, 40), (214, 199, 30), (214, 168, 14), (201, 153, 12), (204, 159, 13), (216, 178, 22), (197, 154, 12), (203, 153, 12), (227, 184, 15), (212, 164, 13), (191, 146, 11), (205, 168, 17), (208, 172, 17), (225, 207, 40), (180, 156, 12), (198, 170, 17), (204, 168, 19), (210, 168, 20), (196, 147, 9), (197, 156, 17), (227, 188, 21), (214, 185, 23), (227, 200, 20), (203, 182, 24), (209, 171, 18), (203, 163, 14), (232, 205, 36), (233, 203, 31), (212, 187, 24), (194, 166, 22), (231, 204, 36), (245, 223, 40), (230, 204, 38), (193, 169, 11), (231, 234, 63), (220, 180, 28), (217, 205, 20), (224, 209, 39), (228, 188, 39), (208, 173, 23)]
cornpoppy = [(181, 43, 28), (228, 23, 32), (233, 48, 31), (227, 33, 21), (194, 9, 37), (241, 82, 54), (245, 50, 42), (242, 62, 45), (202, 32, 27), (234, 16, 34), (208, 29, 16), (187, 31, 5), (191, 12, 4), (226, 21, 21), (217, 41, 21), (236, 38, 34), (242, 81, 53), (206, 17, 21), (212, 26, 4), (207, 15, 10), (206, 20, 9), (203, 43, 87), (205, 6, 5), (175, 44, 48), (223, 55, 47), (149, 21, 10), (137, 10, 4), (192, 23, 9), (188, 17, 8), (247, 99, 80), (188, 24, 7), (198, 41, 40), (204, 6, 5), (204, 43, 43), (246, 68, 5), (232, 41, 29), (221, 39, 22), (204, 38, 33), (218, 10, 24), (186, 11, 26), (187, 38, 45), (238, 45, 48), (227, 34, 14), (232, 27, 33), (215, 37, 37), (217, 22, 12), (204, 47, 47), (227, 73, 19), (206, 43, 35), (246, 54, 40), (206, 31, 13), (181, 38, 44), (218, 52, 43), (227, 47, 19), (214, 40, 20), (225, 65, 25), (222, 33, 22), (192, 23, 6), (217, 31, 36), (184, 14, 31), (183, 34, 5), (182, 17, 14), (198, 19, 5), (210, 53, 15), (190, 31, 33), (193, 40, 16), (205, 25, 39), (207, 38, 49), (242, 65, 53), (211, 33, 43), (218, 66, 48), (220, 27, 21), (163, 11, 10), (197, 54, 25), (201, 37, 33), (225, 40, 15), (244, 70, 48), (245, 69, 57), (209, 45, 43), (214, 94, 52), (198, 9, 21), (238, 18, 34), (246, 74, 71), (208, 56, 58), (246, 33, 43), (210, 70, 33), (218, 7, 5), (241, 107, 58), (232, 72, 8), (236, 76, 44), (212, 42, 19), (243, 51, 89), (202, 21, 6), (220, 41, 42), (222, 42, 43), (242, 72, 25), (245, 48, 7), (249, 42, 5), (227, 43, 36), (235, 68, 53)]
lotus = [(218, 166, 178), (199, 190, 165), (208, 161, 169), (227, 170, 133), (249, 153, 199), (225, 154, 190), (189, 116, 132), (186, 129, 156), (178, 149, 151), (169, 159, 135), (169, 140, 151), (196, 100, 144), (187, 103, 129), (184, 95, 138), (189, 101, 142), (174, 139, 159), (188, 90, 121), (166, 102, 127), (171, 139, 131), (197, 120, 163), (122, 119, 121), (211, 109, 146), (165, 104, 135), (212, 110, 152), (199, 116, 139), (220, 102, 153), (211, 93, 136), (234, 125, 174), (201, 147, 179), (198, 160, 182), (208, 142, 191), (196, 182, 149), (192, 139, 157), (191, 135, 149), (206, 145, 151), (230, 204, 195), (168, 141, 152), (202, 186, 159), (198, 96, 139), (193, 130, 155), (206, 156, 180), (195, 92, 125), (188, 182, 164), (205, 139, 171), (192, 181, 188), (238, 176, 173), (143, 140, 139), (198, 187, 217), (202, 156, 148), (192, 90, 124), (206, 139, 163), (195, 186, 160), (134, 67, 89), (161, 124, 138), (225, 166, 185), (161, 129, 149), (216, 144, 141), (212, 130, 142), (232, 202, 197), (173, 165, 148), (195, 106, 140), (229, 115, 160), (206, 176, 186), (221, 150, 195), (223, 148, 173), (173, 153, 130), (246, 153, 184), (199, 159, 162), (180, 131, 162), (204, 127, 149), (201, 118, 145), (191, 187, 167), (175, 100, 139), (191, 180, 160), (222, 138, 161), (189, 166, 169), (192, 175, 151), (201, 149, 158), (186, 155, 141), (194, 137, 174), (193, 145, 142), (192, 180, 152), (213, 121, 166), (194, 139, 183), (169, 148, 127), (209, 148, 180), (187, 110, 148), (205, 194, 174), (215, 172, 164), (222, 182, 179), (187, 189, 163), (204, 152, 206), (225, 135, 161), (220, 138, 192), (231, 155, 192), (207, 118, 198), (183, 178, 158), (195, 155, 182), (211, 160, 191), (151, 143, 144)]
marigold = [(233, 130, 35), (223, 155, 4), (192, 102, 18), (242, 116, 7), (219, 113, 9), (242, 114, 7), (233, 126, 10), (237, 145, 31), (242, 131, 10), (222, 106, 52), (225, 99, 5), (243, 130, 9), (251, 143, 5), (224, 96, 5), (250, 144, 9), (243, 132, 4), (241, 114, 11), (235, 200, 9), (246, 155, 6), (209, 92, 6), (243, 130, 9), (228, 138, 6), (235, 119, 37), (205, 187, 25), (235, 202, 8), (234, 125, 7), (247, 125, 8), (209, 120, 39), (212, 106, 11), (188, 67, 6), (233, 125, 7), (238, 131, 23), (240, 110, 7), (244, 97, 5), (201, 73, 18), (220, 156, 5), (188, 67, 6), (207, 103, 10), (235, 119, 37), (244, 97, 5), (213, 101, 13), (237, 145, 31), (189, 70, 8), (209, 92, 6), (234, 126, 7), (209, 92, 6), (242, 127, 8), (233, 139, 12), (237, 206, 18), (220, 123, 14), (220, 174, 13), (239, 156, 18), (243, 161, 10), (174, 147, 12), (216, 125, 11), (245, 154, 11), (212, 143, 25), (235, 196, 15), (233, 133, 10), (208, 191, 26), (181, 181, 28), (241, 135, 11), (235, 206, 18), (228, 201, 30), (247, 168, 11), (233, 206, 45), (247, 181, 12), (230, 134, 13), (218, 179, 22), (237, 179, 12), (209, 188, 22), (208, 191, 29), (210, 111, 10), (164, 125, 11), (246, 173, 10), (217, 188, 11), (159, 161, 45), (184, 187, 72), (238, 209, 24), (246, 193, 19), (210, 208, 75), (245, 205, 25), (243, 220, 26), (243, 209, 45), (242, 237, 107), (228, 194, 12), (222, 178, 15), (235, 136, 9), (234, 133, 9), (227, 200, 37), (215, 106, 13), (221, 202, 31), (178, 85, 11), (194, 156, 17), (190, 152, 18), (172, 164, 18), (157, 156, 17), (233, 194, 17), (230, 193, 12), (129, 104, 6)]
rose = [(243, 148, 203), (223, 128, 112), (197, 222, 163), (244, 182, 197), (227, 92, 134), (243, 169, 200), (208, 155, 121), (168, 173, 163), (197, 183, 61), (223, 101, 85), (232, 24, 24), (218, 216, 169), (231, 143, 184), (219, 104, 124), (185, 187, 182), (151, 11, 16), (220, 93, 74), (200, 92, 124), (209, 162, 153), (217, 182, 72), (236, 101, 137), (227, 44, 76), (210, 163, 52), (236, 136, 191), (206, 92, 140), (206, 34, 47), (175, 123, 153), (235, 155, 74), (181, 170, 164), (196, 29, 47), (225, 114, 117), (198, 40, 45), (194, 22, 59), (171, 8, 18), (206, 80, 100), (213, 32, 58), (243, 158, 198), (184, 177, 118), (210, 88, 95), (183, 63, 68), (215, 101, 110), (209, 53, 68), (226, 98, 56), (166, 23, 106), (239, 148, 51), (138, 141, 139), (175, 156, 95), (215, 114, 99), (203, 164, 23), (239, 91, 64), (226, 63, 110), (223, 68, 90), (231, 64, 80), (205, 65, 74), (233, 143, 177), (214, 149, 30), (217, 44, 67), (245, 124, 211), (236, 145, 53), (197, 35, 47), (208, 88, 116), (205, 103, 101), (164, 154, 86), (229, 156, 151), (239, 135, 42), (227, 74, 152), (178, 60, 136), (168, 157, 114), (236, 140, 193), (184, 9, 21), (203, 13, 47), (207, 181, 103), (162, 24, 70), (198, 199, 100), (184, 9, 20), (223, 118, 112), (204, 208, 138), (161, 161, 140), (213, 197, 145), (198, 69, 166), (202, 202, 120), (229, 126, 185), (214, 102, 142), (208, 105, 84), (218, 155, 41), (226, 137, 162), (242, 156, 206), (208, 137, 146), (182, 19, 42), (211, 179, 44), (204, 158, 138), (214, 156, 20), (231, 139, 51), (222, 70, 127), (131, 131, 60), (192, 190, 190), (240, 148, 191), (228, 171, 190), (223, 41, 60), (240, 181, 196)]
sunflower = [(226, 179, 8), (200, 157, 24), (202, 159, 25), (219, 151, 28), (227, 176, 5), (226, 185, 4), (224, 188, 8), (219, 163, 13), (206, 153, 42), (225, 169, 12), (244, 193, 16), (224, 194, 8), (207, 126, 30), (216, 174, 45), (236, 176, 7), (230, 180, 21), (225, 190, 9), (237, 205, 55), (219, 185, 15), (215, 166, 22), (219, 168, 21), (231, 147, 7), (222, 152, 12), (199, 119, 9), (195, 150, 12), (227, 190, 10), (231, 194, 72), (190, 144, 21), (177, 104, 22), (227, 189, 11), (229, 173, 15), (243, 174, 7), (226, 183, 22), (223, 175, 36), (225, 190, 33), (229, 181, 29), (205, 153, 43), (230, 162, 32), (201, 155, 21), (244, 189, 15), (201, 174, 31), (234, 215, 42), (210, 188, 25), (212, 199, 47), (210, 199, 46), (191, 180, 43), (202, 181, 31), (226, 208, 17), (208, 183, 40), (201, 165, 10), (216, 165, 20), (225, 194, 54), (199, 161, 20), (204, 147, 11), (226, 187, 47), (201, 138, 22), (218, 157, 17), (187, 152, 9), (238, 171, 84), (215, 147, 11), (185, 139, 20), (230, 197, 23), (196, 154, 14), (234, 162, 26), (220, 161, 17), (230, 205, 28), (193, 182, 55), (220, 191, 47), (199, 178, 14), (211, 177, 21), (207, 176, 29), (228, 186, 36), (208, 155, 12), (216, 169, 12), (215, 142, 16), (237, 199, 20), (212, 133, 36), (228, 166, 10), (199, 123, 22), (194, 150, 17), (191, 188, 29), (237, 187, 16), (227, 198, 19), (226, 201, 45), (179, 125, 11), (230, 194, 17), (241, 211, 35), (139, 100, 18), (199, 173, 26), (213, 175, 19), (228, 172, 20), (197, 165, 30), (213, 174, 21), (197, 177, 12), (214, 161, 29), (184, 133, 15), (231, 196, 25), (191, 140, 26), (199, 163, 20), (243, 172, 12)]


flower_tag = {1: daisy, 2: blanketflower, 3: buttercup, 4: carnation, 5: dandelion, 6: cornpoppy, 7: lotus,
          8: marigold, 9: rose, 10: sunflower}


def filter(image_path):
    root = "djangoProject"
    path = root + image_path

    color_thief = ColorThief(path)
    palette = color_thief.get_palette(color_count=6)

    min_value = min(palette)
    result = []
    for i in palette:
        if i > min_value:
            result.append(i)

    # print(result)
    print(result[0])

    dominant  = result[0]
    # filename = "dominant_colour.txt"
    # file = open(filename,"r")
    # for line in file:
    #    print(type(line))


    dominant1 = dominant
    dominant2 = dominant
    dominant_add_5 = list(dominant1)
    dominant_sub_5 = list(dominant2)

    count_add = 0
    count_sub = 0

    # increase the value  of 5
    for i in dominant_add_5:
        dominant_add_5[count_add] = i+5
        count_add += 1
    dominant_add_5 = (dominant_add_5)


    # decrease the value of 5
    for j in dominant_sub_5:
        dominant_sub_5[count_sub] = j-5
        count_sub += 1
    dominant_sub_5 = (dominant_sub_5)


    print("add", dominant_add_5)
    print("sub", dominant_sub_5)
    tag = []
    for key, value in flower_tag.items():
        for item in value:
            item = list(item)
            # print(type(item))

            # if the value is in the range of dominant within -/+ 5
            if item[0] > dominant_sub_5[0] and item[1] > dominant_sub_5[1] and item[2] > dominant_sub_5[2]:
                if item[0] < dominant_add_5[0] and item[1] < dominant_add_5[1] and item[2] < dominant_add_5[2]:
                    print(key)
                    tag.append(key)

    # remove dulicates
    tag_name = list(dict.fromkeys(tag))
    tag_int = []
    for i in tag_name:
        tag_int.append(int(i))

    print(tag_int)
    return tag_int
